_format_version: '3.0'

services:
  - name: auth-service
    url: http://backend-auth:9001/api/v1/auth
    routes:
      - name: auth-route
        paths: ['/api/v1/auth']
        methods: ['GET', 'POST', 'PUT', 'DELETE']
        strip_path: true

  - name: user-service
    url: http://backend-user:9002/api/v1/users
    routes:
      - name: user-route
        paths: ['/api/v1/users']
        methods: ['GET', 'POST', 'PUT', 'DELETE']
        strip_path: true

  - name: org-service
    url: http://backend-org:9003/api/v1/orgs
    routes:
      - name: org-route
        paths: ['/api/v1/orgs']
        methods: ['GET', 'POST', 'PUT', 'DELETE']
        strip_path: true

plugins:
  - name: cors
    config:
      origins: ['*']
      methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS']
      headers: ['Content-Type', 'Authorization']
      credentials: true
